FROM debian:11-slim

# Enviroment variables
ENV XMX=1024M
ENV XMS=1024M
ENV SERVER_JAR=server.jar

# Install java
RUN apt-get update -y -qq
RUN apt-get install -y -qq openjdk-17-jre

# Export ports
EXPOSE 25565
EXPOSE 19132/udp
EXPOSE 19133/udp

# Working dir
VOLUME ["/data"]
WORKDIR /data

# Copy Geyser config
RUN mkdir -p /data/plugins/Geyser-Spigot
COPY GeyserConfig.yml /data/plugins/Geyser-Spigot/config.yml

# Entrypoint
COPY entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

ENTRYPOINT [ "/entrypoint.sh" ]
